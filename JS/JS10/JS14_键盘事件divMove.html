<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
#box {
	position: absolute;
	top: 0;
	left: 0;
	width: 100px;
	height: 100px;
	background-color: #00BFFF;
}
</style>
</head>
<body>
	<div id="box"></div>
<script>
(function(d){
	var oBox = d.getElementById('box');
	window.addEventListener('keydown',move);
	window.addEventListener('keyup',stop);
	
	var keyC = {37:null,38:null,39:null,40:null};
	function move(ev){
		var ev = ev || event;
		for ( var s in keyC ){
			if ( !keyC[ev.keyCode] && Math.abs(keyC[ev.keyCode]-s)%2 != 0) {
				if ( ev.keyCode == 37 || ev.keyCode == 39 ) {
					keyC[ev.keyCode] = 'left';
				} else if (ev.keyCode == 38||ev.keyCode == 40) {
					keyC[ev.keyCode] = 'top';
				}
			}
		}
		//setStyle(oBox,keyC);
	}
	function stop(ev){
		var ev = ev || event;
		
		
		keyC[ev.keyCode] = null;
		clearInterval(oBox,keyC[ev.keyCode]+'Timer');
		//keyC.delete(ev.keyCode);
		//console.log(keyC);
	}
	function setStyle(obj,keyC){
		for ( var s in keyC ) {
			if (keyC[s]) {
				clearInterval(obj[keyC[s]+'Timer']);
				obj[keyC[s]+'Timer'] = setInterval(function(){
					if ( keyC[s] == 'left' ){
						obj.style[keyC[s]] = obj.offsetLeft + (-5)+ 'px';
					} else if ( keyC[s] == 'top' ){
						obj.style[keyC[s]] = obj.offsetTop + (-5) + 'px';
					} else if ( keyC[s] == 'right' ){
						obj.style[keyC[s]] = obj.offsetLeft + 5 + 'px';
					} else if ( keyC[s] == 'bottom' ){
						obj.style[keyC[s]] = obj.offsetTop + 5 + 'px';
					}
				},20);
			}
		}
		
	}
	
})(document)
</script>
</body>
</html>
