<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
#magClass {
	position: relative;
	margin: 30px auto;
	width: 300px;
	height: 230px;
}
.small {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	cursor: move;
}
.float {
	display: none;
	position: absolute;
	top: 0;
	left: 0;
	width: 100px;
	height: 100px;
	border: 1px solid rgba(2,164,199,.5);
	background-color: rgba(2,164,199,.2);
}
.big {
	display: none;
	position: absolute;
	top: 0;
	left: 100%;
	width: 100%;
	height: 300px;
	overflow: hidden;
}
.big img {
	position: absolute;
	top: 0;
	left: 0;
}
</style>
</head>
<body>
	<section id="magClass">
		<div class="small">
			<img src="img9/1.jpg" width="300" />
			<div class="float"></div>
		</div>
		<div class="big">
			<img src="img9/1.jpg" width="800" />
		</div>
	</section>
<script>
(function(d){
	var magClass = d.getElementById('magClass');
	var float1 = magClass.getElementsByClassName('float')[0],
		small = magClass.getElementsByClassName('small')[0],
		big = magClass.getElementsByClassName('big')[0],
		img1 = big.getElementsByTagName('img')[0];
	var sRect = small.getBoundingClientRect();	
	
	
	small.addEventListener('mousemove',move);
	small.addEventListener('mouseout',out);
	
	function move(ev){
		float1.style.display = big.style.display = 'block';
		var l = ev.pageX - sRect.left - float1.offsetWidth/2,
			t = ev.pageY - sRect.top - float1.offsetHeight/2;
		if ( l<0 ) {
			l = 0;
		} else if (l>sRect.width-float1.offsetWidth) {
			l=sRect.width-float1.offsetWidth;
		}
		
		if ( t<0 ) {
			t = 0;
		} else if (t>sRect.height-float1.offsetHeight){
			t=sRect.height-float1.offsetHeight;
		}
		float1.style.top = t + 'px';
		float1.style.left = l + 'px';
		
		var wCoef = l/(sRect.width-float1.offsetWidth),
			hCoef = t/(sRect.height-float1.offsetHeight);
		img1.style.top = -hCoef*(img1.offsetHeight-big.offsetHeight) + 'px';
		img1.style.left = -wCoef*(img1.offsetWidth-big.offsetWidth) + 'px';
	}
	function out() {
		float1.style.display = big.style.display = 'none';
	}
	
	
})(document)
</script>
</body>
</html>
