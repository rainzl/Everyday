<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
ul {
	margin: 0;
	padding: 0;
	list-style: none;
}
strong {
	display: block;
	font-weight: normal;
}
.menu1 {
	display: none;
	position: absolute;
	top: 0;
	left: 0;
	width: 100px;
	border: 1px solid #ddd;
	border-bottom: none;
	background-color: #ccc;
	text-align: center;
}
.menu1 li {
	position: relative;
	width: 100%;
	height: 38px;
	font: 14px/38px "宋体";
	border-bottom: 1px solid #ddd;
}
.menu1 .active {
	background-color: paleturquoise;
}
.menu2 {
	position: absolute;
	top: 0;
	left: 100%;
	width: 100%;
	border: none;
	background-color: #ddd;
	display: none;
}
.menu2 li {
	border: none;
	border-bottom: 1px solid #eee;
}
.menu3 {
	position: absolute;
	top: 0;
	left: 100%;
	width: 100%;
	border: none;
	background-color: #eee;
	display: none;
}
.menu3 li {
	border-bottom: 1px solid #fff;
}
.menu1 .show,
.show {
	display: block;
}
.menu1 .hid,
.hid {
	display: none;
}
</style>
</head>
<body>
	<ul id="menu" class="menu1">
		<li><strong>打开</strong></li>
		<li>
			<strong>查看</strong>
			<ul class="menu2">
				<li><strong>超大图标</strong></li>
				<li><strong>大图标</strong></li>
				<li><strong>中等图标</strong></li>
			</ul>
		</li>
		<li>
			<strong>排序方式</strong>
			<ul class="menu2">
				<li><strong>名称</strong></li>
				<li>
					<strong>我下面有子级</strong>
					<ul class="menu3">
						<li><strong>我是第一个</strong></li>
						<li><strong>我是第二个</strong></li>
						<li><strong>我是第三个</strong></li>
					</ul>
				</li>
				<li><strong>类型</strong></li>
			</ul>
		</li>
	</ul>
<script src="JS/publicMain.js"></script>
<script>
(function(d){
	var menu = d.getElementById('menu');
	
	
	
	window.addEventListener('contextmenu',rightClick);
	main(menu);
	function rightClick(ev) {
		var ev = ev || event;
		
		
		addClass(menu,'show');
		menu.style.top = ev.pageY + 'px';
		menu.style.left = ev.pageX + 'px';
		
		ev.preventDefault();
	}
	
	function main(menu){
		menu.onclick = function (ev){
			var ev = ev || event;
			if ( menu.old ) {
				
				var active = menu.old.parentNode.parentNode.querySelectorAll('.active');
				for ( var i=0; i<active.length; i++ ){
					if ( active[i].children[1] ) {
						subClass(active[i].children[1],'show')
					}
					subClass(active[i],'active');
				}
			}
			if ( ev.target.tagName == 'STRONG' ) {
				addClass(ev.target.parentNode,'active');
				if ( ev.target.nextElementSibling ) {
					addClass(ev.target.nextElementSibling,'show');
					main(ev.target.nextElementSibling);
				}
			}
			menu.old = ev.target;
			ev.cancelBubble = true;
		}
	}
	window.onclick = function (ev) {
		var ev = ev || event;
		remove();
	}
	
	function remove(){
		var show = menu.parentNode.querySelectorAll('.show');
		var active = menu.getElementsByClassName('active');
		if ( show ) {
			for ( var i=0; i<show.length; i++ ){
				subClass(show[i],'show');
			}
		}
		if ( active ) {
			for ( var i=0; i<active.length; i++ ){
				subClass(active[i],'active');
			}
		}
	}
})(document)
</script>
</body>
</html>
