<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
ul {
	margin: 0;
	padding: 0;
	list-style: none;
}
#clock {
	position: relative;
	margin: 50px auto;
	width: 400px;
	height: 70px;
	overflow: hidden;
}
#clock li {
	position: absolute;
	top: 0;
	width: 50px;
	font-size: 0;
}
#clock img {
	width: 50px;
	height: 70px;
}
.top {
	position: absolute;
	top: 20px;
	left: 20px;
	width: 10px;
	height: 10px;
	background: url(img3/colon1.jpg) no-repeat;
	background-size: 10px 10px;
	display: none;
}
.bottom {
	position: absolute;
	top: 40px;
	left: 20px;
	width: 10px;
	height: 10px;
	background: url(img3/colon2.jpg) no-repeat;
	background-size: 10px 10px;
	display: none;
}
</style>
<script type="text/javascript" src="../publicJS/miaoV.js" ></script>
<script>
	window.onload = function () {
		//获取所有时间元素
		var aLi = document.querySelectorAll('#clock li');
		var aTimes = document.querySelectorAll('.time');
		var aColons = document.querySelectorAll('.colon span');
		for ( var i=0; i<aLi.length; i++ ) {//给li设置left值，让li顺序平铺
			aLi[i].style.left = (50*i) + 'px';
		}
		
		//给每个时间添加时间属性，目的是和后面获取到的时间对比
		for ( var i=0; i<aTimes.length; i++ ) {
			aTimes[i].clock = 0;
		}
		time();
		var timer = 0;
		timer = setInterval(time,1000);
		
		function time() {
			var date = new Date;
			var hour = date.getHours();
			var minute = date.getMinutes();
			var second = date.getSeconds();
			var strTime = toStr(hour) + toStr(minute) + toStr(second);
			//找出每次执行时，数字改变的元素需要执行动画函数
			for ( var i=0; i<strTime.length; i++ ) {
				if ( aTimes[i].clock != strTime[i] ) {
					change(aTimes[i],strTime[i]);
					aTimes[i].clock = strTime[i];
				}
			}
			//刚执行时原点隐藏
			for ( var i=0; i<aColons.length; i++ ) {
				aColons[i].style.display = 'block';
			}
			//定时：300毫秒后原点显示
			setTimeout(
				function () {
					for ( var i=0; i<aColons.length; i++ ) {
						aColons[i].style.display = 'none';
					}
				},300
			);
			//动画函数形参：需要运动的元素、上一个地址、这次的图片地址
			function change(obj,src) {
				var aImg = obj.getElementsByTagName('img');
				aImg[0].src = 'img3/'+ obj.clock +'.JPG';
				obj.style.top = 0;
				aImg[1].src = 'img3/'+ src +'.JPG';
				mTween(obj,{'top':-70},300,'linear');
			}
		}
		
		function toStr(num) {
			return num >= 10? ''+ num: '0' + num;
		}
	}
</script>
</head>
<body>
	<ul id="clock">
		<li class="time">
			<img src="img3/0.JPG" />
			<img src="img3/0.JPG" />
		</li>
		<li class="time">
			<img src="img3/0.JPG" />
			<img src="img3/0.JPG" />
		</li>
		<li class="colon">
			<span class="top"></span>
			<span class="bottom"></span>
			<img src="img3/colon.JPG"></li>
		<li class="time">
			<img src="img3/0.JPG" />
			<img src="img3/0.JPG" />
		</li>
		<li class="time">
			<img src="img3/0.JPG" />
			<img src="img3/0.JPG" />
		</li>
		<li class="colon">
			<span class="top"></span>
			<span class="bottom"></span>
			<img src="img3/colon.JPG">
		</li>
		<li class="time">
			<img src="img3/0.JPG" />
			<img src="img3/0.JPG" />
		</li>
		<li class="time">
			<img src="img3/0.JPG" />
			<img src="img3/0.JPG" />
		</li>
	</ul>
</body>
</html>
