<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
ul {
	margin: 0;
	padding: 0;
	list-style: none;
}
#wrap {
	margin: 50px auto;
	width: 800px;
	text-align: center;
}
#img {
	position: relative;
	width: 100%;
}
#img li {
	float: left;
	width: 190px;
	height: 159px;
	margin: 5px;
}
#img img {
	width: 190px;
	height: 138px;
}
</style>
</head>
<body>
	<section id="wrap">
		<input type="button" value="从大到小排序" />
		<input type="button" value="随机排序" />
		<ul id="img">
			<li>
				<img {{src}}="{{img}}" />
				<strong>{{caption}}</strong>
			</li>
		</ul>
	</section>
	<script src="../publicJS/miaoV.js"></script>
	<script>
	//外部数据
	var arrCont = [
		{'src':'img5/l1.jpg','caption':'1-图片'},
		{'src':'img5/l2.jpg','caption':'2-图片'},
		{'src':'img5/l3.jpg','caption':'3-图片'},
		{'src':'img5/l4.jpg','caption':'4-图片'},
		{'src':'img5/r1.jpg','caption':'5-图片'},
		{'src':'img5/r2.jpg','caption':'6-图片'},
		{'src':'img5/r3.jpg','caption':'7-图片'},
		{'src':'img5/l2.jpg','caption':'8-图片'}
	];
	var aBtn = getEle('#wrap input');//获取两个按钮
	var oImg = getEle('#img');//获取包裹图片的总父级
	var arrTamp = [];//临时数组：存储图片的html
	var arrStrong = [];//需要进行排序的数组：用来存储下标中的数字
	arrCont.forEach(function(item){//循环数组，将图片总父级中的内容替换为外部数据中的内容
		var str = oImg.innerHTML;
		str = str.replace('{{src}}','src')
				.replace('{{img}}',item.src)
				.replace('{{caption}}',item.caption);
		//将替换完的每份数据存入临时数组中
		arrTamp.push(str);
		//将下标里的所有数字存入需要进行排序的arrStrong数组中
		arrStrong.push(parseInt(item.caption));
	});
	//将临时数组转化成字符串，并插入图片的总父级中
	oImg.innerHTML = arrTamp.join('');
	
	//获取包裹图片和下标的单独的元素
	var aImgs = getEle('#img li');
	//此数组存储每组图片元素的top和left样式
	var arrStyle = [];
	
	//循环获取到的每组图片元素，将top值和left值存入arrStyle数组中
	aImgs.forEach(function(item){
		var leftNum = item.offsetLeft;
		var topNum = item.offsetTop;
		arrStyle.push({'left':leftNum,'top':topNum});
	});
	//循环获取到的每组图片元素，给元素设置绝对定位并赋值
	aImgs.forEach(function(item,i){
		item.style.cssText = `position:absolute;margin:0;left:${arrStyle[i].left}px;top:${arrStyle[i].top}px`;
	});
	
	//从大到小排序
	aBtn[0].onclick = function () {
		arrStrong.sort(function(a,b){
			return a - b;
		});
		//arrStrong.reverse();对现有的顺序进行倒序
		//用排序完的数组对图片组样式重新设置
		aImgs.forEach(function(item,i){
			mTween(item,{'left':arrStyle[arrStrong[i]-1].left,'top':arrStyle[arrStrong[i]-1].top},400,'linear');
		});
	}
	//随机排序
	aBtn[1].onclick = function () {
		arrStrong.sort(function(){
			return 0.5 - Math.random();
		});
		//用排序完的数组对图片组样式重新设置
		aImgs.forEach(function(item,i){
			mTween(item,{'left':arrStyle[arrStrong[i]-1].left,'top':arrStyle[arrStrong[i]-1].top},400,'linear');
		});
	}
	
	/*var arrTest = ['四','一','三','二','六','五'];
	var arrIndex = {
		'一': 1,
		'二': 2,
		'三': 3,
		'四': 4,
		'五': 5,
		'六': 6
	};
	var arr1 = [];
	arrTest.sort(function (a,b){
		return arrIndex[a]-arrIndex[b];
	});*/
	//北京，上海，广州，深圳，杭州，武汉，成都，长沙，大连
	var arrTest = ['上海','北京','深圳','杭州','广州','武汉','大连','成都','长沙'];
	var arrIndex = {
		'北京': 0,
		'上海': 1,
		'广州': 2,
		'深圳': 3,
		'杭州': 4,
		'武汉': 5,
		'成都': 6,
		'长沙': 7,
		'大连': 8
	};
	//顺序排序
	/*arrTest.sort(function(a,b){
		return arrIndex[a] - arrIndex[b];
	});*/
	//随机排序
	arrTest.sort(function(a,b){
		return 0.5-Math.random();
	});
	console.log(arrTest);
	</script>
</body>
</html>
