<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
h4,
p {
	margin: 0;
}
ul {
	margin: 0;
	padding: 0;
	list-style: none;
}
#content {
	margin: 30px auto;
	position: relative;
	width: 500px;
	height: 300px;
	border: 10px solid #D9E3CA;
	overflow: hidden;
}
#content ul {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
}
#content li {
	position: absolute;
	left: 200%;
	width: 500px;
	height: 300px;
}
#content img {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}
#content .footer {
	position: absolute;
	bottom: 0;
	left: 0;
	height: 0;
	width: 100%;
	background-color: rgba(0,0,0,.6);
	color: #fff;
}
.footer h4 {
	width: 100%;
	text-indent: 10px;
	font: bold 20px/50px "宋体";
}
.footer p {
	text-indent: 10px;
	width: 100%;
}


</style>
<script src="../publicJS/Js1_publicMove.js"></script>
<script>
	function getStyle(obj,attr) {
		return obj.currentStyle? obj.currentStyle[attr]: getComputedStyle(obj)[attr];
	}
	arr = [
		['textImg/1.jpg','深改组1000天：让人民希望变成生活现实','立柱架梁  夙兴夜寐  27次会议  一千零一夜  专题  治国理政  理上网来'],
		['textImg/2.jpg','加总理“回请”李克强 中加关系“升温”','鼓励小小特鲁多  专题  网络安全周  长征精神  重回长征历史现场'],
		['textImg/3.jpg','加总理“回请”李克强 中加关系“升温”','鼓励小小特鲁多  专题  网络安全周  长征精神  重回长征历史现场']
	];
	window.onload = function () {
		var oCont = document.getElementById('content');
		
		
		var str = '';
		/*----------------页面内容加载开始---------------*/
		str += '<ul style="width='+ arr.length +'00%">';
		for ( var i=0; i<arr.length; i++ ) {
			str += '<li>';
			str += '<img src="' + arr[i][0] + '" />';
			str += '<div class="footer">';
			str += '<h4>'+ arr[i][1] +'</h4>';
			str += '<p>'+ arr[i][2] +'</p>';
			str += '</div></li>';
		}
		str += '</ul>';
		oCont.innerHTML = str;
		/*----------------页面内容加载完成---------------*/
		
		//获取列表
		var oContUl = oCont.getElementsByTagName('ul')[0];
		//获取列表中每一组
		var oContLi = oContUl.getElementsByTagName('li');
		
		
		
		var timer = 0;
		var timer1 = 0;
		var n1 = 0;
		var n2 = 1;
		/*----------页面显示初始化开始------------*/
		oContLi[n1].style.left = 0;
		footText(oContLi[n1]);
		/*----------页面显示初始化完成呢------------*/
		
		clearInterval(timer);
		timer = setInterval(
			function () {
				n1 %= arr.length;
				n2 %= arr.length;
				main( oContLi[n1],oContLi[n2] );
				n1 ++;
				n2 ++;
			},3000
		);
		
		var left1 = 0;
			var left2 = parseFloat(getStyle(oContUl,'width'));
		/*-----------图片组切换函数(参数：需要出现的两个图片组)-------------*/
		function main( obj1,obj2 ) {
			
			getStyle(obj1,'left',left1);
			getStyle(obj2,'left',left2);
			
			//元素左移动画效果
			/*mTween(obj1,'left',-500,1000,'linear');*/
			
			mTween(obj1,'left',-500,1000,'linear');
			mTween(obj2,'left',0,1000,'linear');
			/*clearInterval(obj1.timer);
			
			obj1.timer = setInterval(
				function () {
					if ( left1 <= -500 || left2 <= 0 ) {
						left1 = -500;
						left2 = 0;
						clearInterval(obj1.timer);
						//内容显示动画效果
						footText(obj2);
					} else {
						left1 -= 10;
						left2 -= 10;
					}
					obj1.style.left = left1 +'px';
					obj2.style.left = left2 +'px';
				},20
			);*/
		}
		/*-------底部文字动画函数(参数：需要弹出的文字父级)----------*/
		function footText(obj2) {
			var oContFoot = obj2.querySelector('.footer');
			var oContFootHeig = parseFloat(getStyle(oContFoot,'height'));
			//内容显示动画效果
			clearInterval(timer1);
			timer1 = setInterval(
				function () {
					if ( oContFootHeig >= 80 ) {
						oContFootHeig = oContFootHeig;
						clearInterval(timer1);
						//延时关闭
						setTimeout(
							function () {
								//动画底部标题关闭
								timer1 = setInterval(
									function () {
										if ( oContFootHeig <= 0 ) {
											oContFootHeig = oContFootHeig;
											clearInterval(timer1);
										} else {
											oContFootHeig -= 2;
										}
										oContFoot.style.height = oContFootHeig + 'px';
									},20
								);
							},1000
						);
					} else {
						oContFootHeig += 2;
					}
					oContFoot.style.height = oContFootHeig + 'px';
				},20
			);
		}
		
	}
</script>
<!--功能分析
	1、 加载完成自动开启一个定时器：
		每隔5秒执行一次；
		执行的函数：切换图片
			切换图片的函数：
				定义两个初始值。一个n1一个n2。n1=0；n2=1；
				每次调用函数两只值分别加1.
				
				
		
	-->		
</head>
<body>
	<div id="content">
	</div>
</body>
</html>
