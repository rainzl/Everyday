<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
.section {
	position: relative;
	margin: 30px auto;
	width: 800px;
	height: 400px;
	border: 5px solid #8C8494;
}
#btn {
	position: absolute;
	top: 0;
	left: 0;
	width: 800px;
	z-index:  5;
}
#btn span {
	position: absolute;
	top: 180px;
	width: 50px;
	height: 50px;
	border-radius: 50%;
	font: bold 30px/50px "宋体";
	text-align: center;
	background-color: rgba(0,0,0,.3);
	color: #fff;
}
#btn span:nth-of-type(1) {
	left: 10px;
}
#btn span:nth-of-type(2) {
	right: 10px;
}
#wrap {
	position: absolute;
	width: 800px;
	height: 400px;
	/*border: 5px solid #8C8494;*/
}
.box {
	position: absolute;
	top: 0;
	left: 0;
	width: 800px;
	height: 400px;
	overflow: hidden;
}
#content {
	position: absolute;
	top: 0;
	left: 0;
	width: 800px;
	height: 400px;
}
#content img {
	position: absolute;
	top: 0;
	left: 0;
	width: 800px;
	height: 400px;
}
.footer {
	position: absolute;
	bottom: 0;
	left: 0;
	height: 30px;
	width: 100%;
	text-align: center;
	font: bold 16px/30px "宋体";
	color: #fff;
}
.footer span {
	float: left;
	width: 48%;
	height: 30px;
	border-right:1px solid #8C8494;
	background-color: rgba(255,0,0,.4);
}
.footer .active {
	background-color: rgba(255,0,0,.8);
}
</style>
<script src="../publicJS/Js1_publicMove.js"></script>
<script>
	window.onload = function () {
		var arr = [
			['img10/img1.gif','img10/img2.gif','img10/img3.gif','img10/img4.gif'],
			['暖色调素材一','暖色调素材二','暖色调素材三','暖色调素材四']
		];
		var oWrap = document.getElementById('wrap');
		var wid = parseInt(getStyle(oWrap,'width'));
		var hei = parseInt(getStyle(oWrap,'height'));
		
		
		/*----------------页面内容加载开始---------------*/
		var asideStr = '';
		asideStr += '<div class="box"><div style="width:'+ (arr[0].length * wid) +'px" id="content">';
		//生成图片
		for ( i=0; i<arr[0].length; i++ ) {	
			asideStr += '<img style="left: '+ (i*wid) +'px" src="'+ arr[0][i] +'">';
		}
		asideStr += '</div><footer class="footer">';
		//生成底部导航
		for ( i=0; i<arr[0].length; i++ ) {
			
			asideStr += '<span style="width:'+ (wid/arr[1].length - 1) +'px">'+ arr[1][i] +'</span>';
		}
		asideStr += '</footer></div>'
		oWrap.innerHTML = asideStr;
		/*----------------页面内容加载完成---------------*/
		
		var oSct = document.getElementsByClassName('section')[0];
		//获取按钮
		var aBtns = document.querySelectorAll('#btn span');
		//获取图片父级以及每个图片
		var aCont = document.querySelector('#content');
		var aContImg = document.querySelectorAll('#content img');
		//获取底部导航
		var aContFoots = document.querySelectorAll('.footer span');
		
		var n = 0;
		var n1 = 1;
		var n2 = arr[0].length - 1;
		var timer = 0;
		main();
		clearInterval(timer);
		timer = setInterval(next,3000);
		
		
		
		function next() {
			aContImg[n].style.left = 0 + 'px';
			aContImg[n1].style.left = wid + 'px';
			mTween(aContImg[n],'left',-wid,600,'linear');
			mTween(aContImg[n1],'left',0,600,'linear');
			n++;
			n1++;
			n2++;
			n %= arr[0].length;
			n1 %= arr[0].length;
			n2 %= arr[0].length;
			main();
		}
		function prev() {
			aContImg[n].style.left = 0 + 'px';
			aContImg[n2].style.left = -wid + 'px';
			mTween(aContImg[n],'left',wid,600,'linear');
			mTween(aContImg[n2],'left',0,600,'linear');
			
			n--;
			n1--;
			n2--;
			if ( n < 0 ) {
				n = arr[0].length-1;
			}
			if ( n1 < 0 ) {
				n1 = arr[0].length-1;
			}
			if ( n2 < 0 ) {
				n2 = arr[0].length-1;
			}
			main();
		}
		//鼠标移入section:定时器关闭
		oSct.onmouseover = function () {
			clearInterval(timer);
		}
		oSct.onmouseout = function () {
			timer = setInterval(next,3000);
		}
		//点击上一张：图片组左右移动，导航样式改变
		aBtns[0].onclick = prev;
		/*function prev() {
			n > 0? n--: n = aContImg.length - 1;
			main();
		}*/
		//点击下一张：图片组左右移动，导航样式改变
		aBtns[1].onclick = next;
		
		//循环点击每个底部标题，切换图片
		for ( var i=0; i<aContFoots.length; i++ ) {
			//循环点击每个标题，图片左右移动
			aContFoots[i].index = i;
			aContFoots[i].onmouseover = function () {
				n = this.index;
				n1 = n + 1;
				n2 = n - 1;
				if ( n == aContFoots.length - 1 ) {
					n1 = 0;
				} else if ( n == 0 ) {
					n2 = aContFoots.length - 1;
				}
				mTween(aContImg[n],'left',-wid,600,'linear');
				mTween(aContImg[n1],'left',0,600,'linear');
				mTween(aContImg[n2],'left',-*wid,600,'linear');
				main();
			}
		}
		function main() {
			//aCont.style.left = -n * wid + 'px';
			
			for ( var i=0; i<aContImg.length; i++ ) {
				aContFoots[i].className = '';
			}
			aContFoots[n].className = 'active';
			//mTween(aCont,'left',-n * wid,1000,'linear');
		}
	}
</script>
</head>
<body>
	<div class="section">
		<div id="btn">
			<span><</span>
			<span>></span>
		</div>
		<section id="wrap"></section>
	</div>
</body>
</html>
