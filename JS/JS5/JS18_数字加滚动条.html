<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
#wrap {
	margin: 0 auto;
	position: relative;
	width: 600px;
	height: 300px;
	padding: 5px;
	border: 1px solid #21C618;
}
#wrap footer {
	position: absolute;
	bottom: 5px;
	left: 5px;
	width: 600px;
	height: 60px;
	border: 1px solid #000000;
}
#wrap span {
	position: absolute;
	bottom: 0;
	height: 100%;
	width: 50px;
	font: 20px/60px "宋体";
	text-align: center;
}
footer div {
	position: absolute;
	bottom: 0;
	left: 0;
	width: 0;
	height: 60px;
	background-color: #B0E0E6;
}
</style>
<script src="../publicJS/miaoV.js"></script>
<script>
	window.onload = function () {
		//获取数字加滚动条的父级元素
		var oWrap = getId('wrap');
		var oFoot = getTag(oWrap,'footer')[0];
		
		//获取文字底部滚动条父级的宽度
		var oFootWid = css(oFoot,'width');
		var n = 50;//每个span的宽度
		/*----------根据父级宽度生成不同span标签,并设置left值-----------*/
		var str = '';
		for ( var i=0,len = oFootWid/n; i<len; i++ ) {
			str += '<span style="left:'+ (i*n) +'px;">+1</span>';
		}
		oFoot.innerHTML = '<div></div>' + str;
		
	
		
		var timer = 0;
		var oDiv = getTag(oWrap,'div')[0];//需要运动的滚动条
		var aSpan = getTag(oWrap,'span');//需要运动的数字标签
		/*------------点击底部数字和滚动条同时执行运动函数---------*/
		oFoot.onclick = setOut;
		function setOut() {
			oFoot.onclick = null;
			var num = 0;//此变量控制需要运动的span为第几个
			clearInterval(timer);
			/********每间隔100毫秒,有一个数字标签开始运动********/
			timer = setInterval(
				function () {
					if (  num < aSpan.length - 1 ) {
						mTween(aSpan[num],{'bottom':200,'opacity':0},1000,'linear');//一个参数为对象。
					} else {
						mTween(aSpan[num],{'bottom':200,'opacity':0},1000,'linear',function(){
							oFoot.onclick = setBack;
							
						});
						clearInterval(timer);
					}
					num ++;
				},100
			);
			/********滚动条线先从左到右，再改变透明度为0********/  //添加函数回调
			mTween(oDiv,{'width':oFootWid},1000,'linear',function(){mTween(oDiv,{'opacity':0},800,'linear')});
		}
		function setBack() {
			oFoot.onclick = null;
			var num = aSpan.length - 1;//此变量控制需要运动的span为第几个
			clearInterval(timer);
			/********每间隔100毫秒,有一个数字标签开始运动********/
			timer = setInterval(
				function () {
					if (  num > 0 ) {
						mTween(aSpan[num],{'bottom':0,'opacity':100},1000,'linear');//一个参数为对象。
						console.log(num);
					} else {
						mTween(aSpan[num],{'bottom':0,'opacity':100},1000,'linear',function(){
							oFoot.onclick = setOut;
						});
						clearInterval(timer);
					}
					num --;
				},100
			);
			/********滚动条线先从左到右，再改变透明度为0********/  //添加函数回调
			mTween(oDiv,{'opacity':100},800,'linear',function(){mTween(oDiv,{'width':0},1000,'linear')});
		}
	}
</script>
</head>
<body>
<section id="wrap">
	<footer></footer>
</section>
</body>
</html>
