<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
ul {
	padding: 0;
	margin: 0;
	list-style: none;
}
#clock {
	perspective-origin: 1000px;
	margin: 100px auto;
	width: 360px;
	height: 300px;
	background-color: #A8A8A8;
}
#clock li {
	position: relative;
	float: left;
	width: 50px;
	height: 300px;
	transform-origin: center center -95.4px;
	transform-style: preserve-3d;
	transition: .2s;
}
/*#clock li:nth-of-type(1) {
	transform: rotateX(-36deg);
}*/
#clock span {
	position: absolute;
	left: 0;
	top: 120px;
	width: 50px;
	height: 60px;
	border: 1px solid #fff;
	border-radius: 10px;
	background-color: #000;
	font: bold 30px/60px "宋体";
	text-align: center;
	color: #fff;
	transform-origin: center center -95.4px;
}
#clock li span:nth-of-type(2){
	transform: rotateX(36deg);
}
#clock li span:nth-of-type(3){
	transform: rotateX(72deg);
}
#clock li span:nth-of-type(4){
	transform: rotateX(108deg);
}
#clock li span:nth-of-type(5){
	transform: rotateX(144deg);
}
#clock li span:nth-of-type(6){
	transform: rotateX(180deg);
}
#clock li span:nth-of-type(7){
	transform: rotateX(216deg);
}
#clock li span:nth-of-type(8){
	transform: rotateX(252deg);
}
#clock li span:nth-of-type(9){
	transform: rotateX(288deg);
}
#clock li span:nth-of-type(10){
	transform: rotateX(324deg);
}
</style>
<script type="text/javascript" src="../publicJS/miaoV.js" ></script>
<script>
	window.onload = function () {
		var r = Math.tan(((180-36)/2)*Math.PI/180)*31;//圆柱的半径95.4px
		var aLi = document.querySelectorAll('#clock li');
		var timer = 0;
		var arr = [];
		
		//页面开始加载时间
		var oDate = new Date;
		var hour = numToStr(oDate.getHours());
		var minute = numToStr(oDate.getMinutes());
		var second = numToStr(oDate.getSeconds());
		var strOld = hour + minute + second;
		for ( var i=0; i<aLi.length; i++ ) {
			aLi[i].index = Number(strOld[i]);
			arr[i] = strOld[i];
			aLi[i].style.transform = 'rotateX('+(-Number(strOld[i])*36)+'deg)';
		}
		
		function fnHour(){
			//获取时间
			var oDate = new Date;
			var hour = numToStr(oDate.getHours());
			var minute = numToStr(oDate.getMinutes());
			var second = numToStr(oDate.getSeconds());
			var str = hour + minute + second;
			
			for ( var i=0; i<aLi.length; i++ ) {
				if ( isNaN(Number(arr)) ) {
					if ( arr[i] != str[i] ) {
						aLi[i].index ++;
						if ( i == 0 ) {
							aLi[i].index %= 2;
						} else if ( i == 1 ) {
							aLi[i].index %= 24;
						} else if ( i == 2 ) {
							aLi[i].index %= 6;
						} else if ( i == 4 ) {
							aLi[i].index %= 6;
						}
						console.log(aLi[5].index);
						aLi[i].style.transform = 'rotateX('+(-aLi[i].index*36)+'deg)';
					}
				} else {
					aLi[i].style.transform = 'rotateX('+(-Number(str[i])*36)+'deg)';
				}
			}
			for ( var i=0; i<aLi.length; i++ ) {
				arr[i] = str[i];
			}
		}
		//fnHour();
		timer = setInterval(
			fnHour,1000
		);
		
		
		
		//获取元素样式
		function getStyle( obj,attr ){
			return obj.currentStyle? obj.currentStyle[attr]: getComputedStyle(obj)[attr];
		}
		//数字转字符串方法
		function numToStr(num){
			return num > 9? ''+num: '0'+ num;
		}
	}
</script>
</head>
<body>
	<ul id="clock">
		<li>
			<span>0</span>
			<span>1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
			<span>6</span>
			<span>7</span>
			<span>8</span>
			<span>9</span>
		</li>
		<li>
			<span>0</span>
			<span>1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
			<span>6</span>
			<span>7</span>
			<span>8</span>
			<span>9</span>
		</li>
		<li>
			<span>0</span>
			<span>1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
			<span>6</span>
			<span>7</span>
			<span>8</span>
			<span>9</span>
		</li>
		<li>
			<span>0</span>
			<span>1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
			<span>6</span>
			<span>7</span>
			<span>8</span>
			<span>9</span>
		</li>
		<li>
			<span>0</span>
			<span>1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
			<span>6</span>
			<span>7</span>
			<span>8</span>
			<span>9</span>
		</li>
		<li>
			<span>0</span>
			<span>1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
			<span>6</span>
			<span>7</span>
			<span>8</span>
			<span>9</span>
		</li>
	</ul>
</body>
</html>
