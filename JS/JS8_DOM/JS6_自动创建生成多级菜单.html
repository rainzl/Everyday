<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
h1{
	margin: 0;
}
ul {
	margin: 0;
	padding: 0;
	list-style: none;
}
#list li {
	padding-left: 20px;
}
#list h1 {
	font: 16px/30px "宋体";
}
#list li span {
	padding: 0 10px;
	font: bold 16px/30px "微软雅黑";
}
#list .hid {
	display: none;
}
#list .show {
	display: block;
}
</style>
</head>
<body>
	<ul id="list">
		<!--<li>
			<h1><span>+</span>一级菜单</h1>
			<ul class="hid">
				<li>
					<h1><span>+</span>二级菜单</h1>
					<ul class="hid">
						<li><h1>三级菜单</h1></li>
						<li><h1>三级菜单</h1></li>
					</ul>
				</li>
				<li><h1>二级菜单</h1></li>
				<li><h1>二级菜单</h1></li>
			</ul>
		</li>-->
	</ul>
<script>
/*var data = [
	{
		'title':'一级菜单',
		'child':[
			{
				'title':'二级菜单',
				'child':[
					{'title':'三级菜单'},
					{'title':'三级菜单'}
				]
			},
			{
				'title':'二级菜单',
				'child':[
					{
						'title':'三级菜单',
						'child':[
							{'title':'四级菜单'},
							{'title':'四级菜单'}
						]
					},
					{'title':'三级菜单'}
				]
			}
		]
	},
	{
		'title':'一级菜单',
		'child':[
			{
				'title':'二级菜单',
				'child':[
					{'title':'三级菜单'},
					{'title':'三级菜单'}
				]
			},
			{
				'title':'二级菜单',
				'child':[
					{
						'title':'三级菜单',
						'child':[
							{'title':'四级菜单'},
							{'title':'四级菜单'}
						]
					},
					{'title':'三级菜单'}
				]
			}
		]
	}
];*/
var data = '[{"title":"一级菜单","child":[{"title":"二级菜单","child":[{"title":"三级菜单"},{"title":"三级菜单"}]},{"title":"二级菜单","child":[{"title":"三级菜单","child":[{"title":"四级菜单"},{"title":"四级菜单"}]},{"title":"三级菜单"}]}]},{"title":"一级菜单","child":[{"title":"二级菜单","child":[{"title":"三级菜单"},{"title":"三级菜单"}]},{"title":"二级菜单","child":[{"title":"三级菜单","child":[{"title":"四级菜单"},{"title":"四级菜单"}]},{"title":"三级菜单"}]}]}]';
var arr = [];
var oLi = document.getElementById('list');
var dataJson = JSON.parse(data);
creatEle(dataJson,oLi);
function creatEle(obj,oul) {
	
	obj.forEach(function(item){
		var li = document.createElement('li');
		var h1 = document.createElement('h1');
		
		if ( item.child ) {
			var span = document.createElement('span');
			var ul = document.createElement('ul');
			ul.className = 'hid';
			span.innerHTML = '+';
			h1.appendChild(span);
			h1.innerHTML += item.title;
			
			creatEle(item.child,ul);//递归调用函数
			li.appendChild(h1);
			li.appendChild(ul);
		} else {
			h1.innerHTML += item.title;
			li.appendChild(h1);
		}
		oul.appendChild(li);
	});
}


menuShow(oLi);
function menuShow(obj) {
	var aLis = Array.from(obj.children);
	aLis.forEach(function(item){
		var oH2 = item.getElementsByTagName('h1')[0];
		var oUl = item.getElementsByTagName('ul')[0];
		var oSpan = item.getElementsByTagName('span')[0];
		if ( oUl ) {
			oH2.onclick = function () {
				if ( oUl.className == 'hid' ) {
					closeMenu(obj);
					oSpan.innerHTML = '-';
					oUl.className = 'show';
					menuShow(oUl);	
				} else {
					oSpan.innerHTML = '+';
					oUl.className = 'hid';
					closeMenu(oUl);
				}
			}
		}
	});
}
function closeMenu(obj) {
	var aLis = Array.from(obj.children);
	aLis.forEach(function(item,i,arr){
		var oUl = item.getElementsByTagName('ul')[0];
		var oSpan = item.getElementsByTagName('span')[0];
		if ( oUl ) {
			oUl.className = 'hid';
			oSpan.innerHTML = '+';
			closeMenu(oUl);
		}
	});
}


</script>
</body>
</html>
