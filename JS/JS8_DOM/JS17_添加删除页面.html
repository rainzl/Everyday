<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
<style>
html,
body,
.wrap {
	width: 100%;
	height: 100%;
}
body,
h1 {
	margin: 0;
}
ul {
	margin: 0;
	padding: 0;
	list-style: none;
}
a {
	text-decoration: none;
}
#header {
	height: 80px;
	text-align: center;
	background-color: #eee;
}
.nav {
	float: left;
	margin: 0 10px;
	height: 80px;
}
.nav h1 {
	float: left;
	position: relative;
	width: 100px;
	padding: 0 20px;
	border-right: 1px solid #fff;
	font: 20px/80px "宋体";
}
.nav .active {
	background-color: #B0E0E6;
}
.nav a {
	position: absolute;
	top: 0;
	right: 0;
	width: 20px;
	height: 20px;
	font: 20px/1 arial;
	color: #666;
}
#header .addBtn {
	float: left;
	margin: 10px;
	width: 60px;
	height: 60px;
	font: bold 50px/60px "宋体";
	background-color: #ddd;
	border-radius: 10px;
	color: #fff;
}
#tBody {
	position: relative;
	height: 530px;
}
#tBody li {
	position: absolute;
	top: 0;
	left: 0;
	height: 100%;
	width: 100%;
	background-color: #fff;
	z-index: 1;
}
#tBody .active {
	z-index: 2;
}
</style>
</head>
<body>
	<section class="wrap">
		<header id="header">
			<nav class="nav">
				<!--<h1 class="active">
					标题一
					<a href="javascript:;">x</a>
				</h1>
				<h1>
					标题二
					<a href="javascript:;">x</a>
				</h1>-->
			</nav>
			<a class="addBtn" href="javascript:;">+</a>
		</header>
		<ul id="tBody">
			<!--<li class="active">内容一</li>
			<li>内容二</li>-->
		</ul>
	</section>
<script src="JS/publicMain.js"></script>
<script>
var data = [
	{
		'title':'标题一',
		'cont':'内容一'
	},
	{
		'title':'标题二',
		'cont':'内容二',
	},
	{
		'title':'标题三',
		'cont':'内容三',
	}
];
var oHead = document.getElementById('header');
var oNav = oHead.getElementsByTagName('nav')[0];
var oAddBtn = oHead.getElementsByClassName('addBtn')[0];
var oBody = document.getElementById('tBody');
var num = 0;
var arr = [];
createBody();

oAddBtn.onclick = createBody;

function createBody() {
	var h1 = document.createElement('h1');
	var a = document.createElement('a');
	var li = document.createElement('li');
	num = hasData();
	clearClass();
	a.href = 'javascript:;';
	a.innerHTML = 'x';
	
	a.onclick = function (ev){
		
		if ( h1.className == 'active' ) {
			if ( h1.nextElementSibling ) {
				h1.nextElementSibling.className = 'active';
				li.nextElementSibling.className = 'active';
			} else if ( h1.previousElementSibling ) {
				h1.previousElementSibling.className = 'active';
				li.previousElementSibling.className = 'active';
			} else {
				alert('已经是最后一个了……╮(╯﹏╰)╭')
				return;
			}
		}
		arr[h1.index] = '';
		
		oBody.removeChild(li);
		oNav.removeChild(h1);
		addHid();
		var ev = ev || event;
		ev.cancelBubble = true;
	}
	h1.innerHTML = data[num].title;
	h1.index = num;
	arr[num] = num;
	h1.appendChild(a);
	h1.className = 'active';
	h1.onclick = function () {
		clearClass();
		this.className = 'active';
		li.className = 'active';
	}
	oNav.appendChild(h1);
	
	li.innerHTML = data[num].cont;
	li.className = 'active';
	oBody.appendChild(li);
	
	addHid();
}
function addHid() {
	var aLis = oBody.getElementsByTagName('li');
	if (aLis.length >= data.length){
		oAddBtn.style.display = 'none';
	} else {
		oAddBtn.style.display = 'block';
	}
}
function hasData() {
	for ( var i= 0; i<arr.length; i++ ) {
		if ( arr[i] === '' ) {
			return i;
		}
	}
	return arr.length;
}
function clearClass() {
	var aHs = oNav.getElementsByTagName('h1');
	var aLis = oBody.getElementsByTagName('li');
	for ( var i=0; i<aHs.length; i++ ) {
		subClass(aHs[i],'active');
		subClass(aLis[i],'active');
	}
}
</script>
</body>
</html>
